#include <iostream>
using std::cerr;
using std::cout;
using std::endl;

#include <vector>
using std::vector;

#include "dataset.hxx"
#include "test_common.hxx"

void test_dataset(string name, vector<double> expected_means, vector<double> expected_stds) {
    Dataset *dataset = new Dataset("../data/" + name + ".csv");

    vector<double> means;
    vector<double> stds;
    dataset->get_statistics(means, stds);

    print_vector(name + " means", means);
    print_vector(name + " stds", stds);

    compare_vectors(name + " means", means, expected_means);
    compare_vectors(name + " stds", stds, expected_stds);

    delete dataset;
}

int main(int argc, char** argv) {
    vector<double> expected_means{5.84333333333333, 3.054, 3.75866666666667, 1.19866666666667};
    vector<double> expected_stds{0.825301291785141, 0.432146580070544, 1.75852918340552, 0.760612618588172};
    test_dataset("iris", expected_means, expected_stds);

    expected_means = {14.1272917398946, 19.2896485061512, 91.9690333919157, 654.889103690686, 0.096360281195079, 0.104340984182777, 0.0887993158172232, 0.0489191458699472, 0.181161862917399, 0.0627976098418278, 0.405172056239016, 1.21685342706503, 2.86605922671353, 40.337079086116, 0.00704097891036907, 0.0254781388400703, 0.0318937163444639, 0.0117961370826011, 0.0205422987697715, 0.00379490386643234, 16.2691898066784, 25.677223198594, 107.261212653779, 880.583128295254, 0.132368594024605, 0.254265043936731, 0.272188483304042, 0.114606223198594, 0.290075571177505, 0.0839458172231985};
    expected_stds = {3.52095076071106, 4.29725463709042, 24.2776192930532, 351.60475406323, 0.0140517640665912, 0.0527663291253552, 0.0796497253460319, 0.0387687324614747, 0.0273901808642685, 0.00705415588153735, 0.277068941525365, 0.551163426903576, 2.02007709914552, 45.4510134156399, 0.00299987836711448, 0.017892435868282, 0.0301595231219705, 0.0061648607464717, 0.00825910438758814, 0.00264374475040474, 4.82899257606077, 6.140854318589, 33.5730015668259, 568.856458953267, 0.0228123569355446, 0.157198171094554, 0.208440874611706, 0.0656745545111932, 0.0618130785445548, 0.018045389308595};
    test_dataset("wdbc", expected_means, expected_stds);

    return 0;
}
